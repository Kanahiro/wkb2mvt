import test from 'ava';

import { wkb2Mvt } from '../index.js';

import * as fs from 'fs';

test('sum from native', (t) => {
    const res = wkb2Mvt(
        Buffer.from(
            '0106000020E6100000010000000103000000010000001B00000064E2FB87597F61407AC6BE64E35842408649021E627F6140D466F73F1B594240B32E2416677F614085A059C8125942402984C42C6A7F6140FE5EAF5527594240735CD779657F61401C3F541A31594240A2F4E049667F6140E45B696336594240FAE70E076E7F6140ADB200B738594240A7131AD2727F61407A104C7F40594240DFD27B74747F614019558671375942408450943A777F614058607E5D3C594240EFA42A12787F6140EF2BC5443959424075498BE9787F61404DB8FC2C3B594240E8D19EDC807F6140BAA5304A2B594240C0E4EBD7827F61404EE08C5022594240831F8B23857F61401D91EF52EA5842408F26CDD5857F6140F629221EE4584240795FF0C4877F61403E1B5EB5D758424028EDB2047E7F6140AC0892D2C758424096E24FF97C7F6140F977C773C75842402367614F7B7F614075BB4D6ECA584240EF4806CA777F61405367A494C658424034E7CF6D787F614021CE1EC3BE5842405C7171546E7F6140EB217596B4584240FFBFFBF4697F61401378CCE5AB5842408EC3AA8B657F61403F5D9324BE584240B8D562A6637F61404835ECF7C458424064E2FB87597F61407AC6BE64E3584240',
            'hex',
        ),
        4096,
        new Float64Array([135, 35, 142, 42]),
        {
            test: 'test',
            test2: 10.12345678,
            test3: false,
            test4: 10,
        },
    );
    fs.writeFileSync('test.mvt', res);
    t.is(sum(1, 2), 3);
});
